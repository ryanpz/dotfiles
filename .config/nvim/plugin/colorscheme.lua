local palette = {
  bg = 'NONE',
  fg = '#ffffff',
  black = '#000000',
  red = '#ff938f',
  green = '#c0ffe3',
  yellow = '#ffffbe',
  blue = '#c0e9ff',
  magenta = '#ffcbf4',
  cyan = '#c0fcff',
  white = '#ffffff',
  gray = '#909090',
  selection_bg = '#444444',
  menu = '#202020',
  menu_alt = '#242424',
  nontext = '#3b4048',
  added_bg = '#00381f',
  added_fg = '#a0e0a0',
  changed_bg = '#004065',
  changed_fg = '#b9c6e0',
  removed_bg = '#4f1119',
  removed_fg = '#ffbfbf',
  search_bg = '#dadada',
  cur_search_bg = '#ff9632',
}

local set_groups = function(p)
  local groups = {
    ColorColumn = { bg = p.selection_bg },
    Conceal = { link = 'NonText' },
    CurSearch = { fg = p.black, bg = p.cur_search_bg },
    Cursor = { reverse = true },
    lCursor = { link = 'Cursor' },
    CursorIM = { link = 'Cursor' },
    CursorColumn = { bg = p.selection_bg },
    CursorLine = { bg = p.selection_bg },
    Directory = { link = 'Normal' },
    DiffAdd = { fg = p.added_fg, bg = p.added_bg },
    DiffChange = { fg = p.changed_fg, bg = p.changed_bg },
    DiffDelete = { fg = p.removed_fg, bg = p.removed_bg },
    DiffText = { fg = p.black, bg = p.blue },
    EndOfBuffer = { link = 'NonText' },
    TermCursor = { link = 'Cursor' },
    ErrorMsg = { fg = p.red },
    WinSeparator = { fg = p.gray },
    Folded = { fg = p.gray },
    FoldColumn = { link = 'SignColumn' },
    SignColumn = { link = 'LineNr' },
    IncSearch = { link = 'CurSearch' },
    Substitute = { link = 'Search' },
    LineNr = { fg = p.gray },
    LineNrAbove = { link = 'LineNr' },
    LineNrBelow = { link = 'LineNr' },
    CursorLineNr = { fg = p.fg, bold = true },
    CursorLineFold = { link = 'FoldColumn' },
    CursorLineSign = { link = 'SignColumn' },
    MatchParen = { bg = p.selection_bg },
    ModeMsg = { fg = p.fg, bold = true },
    MsgArea = {},
    MsgSeparator = { link = 'StatusLine' },
    MoreMsg = { fg = p.green },
    NonText = { fg = p.nontext },
    Normal = { fg = p.fg, bg = p.bg },
    NormalFloat = { fg = p.fg, bg = p.menu_alt },
    FloatBorder = { link = 'WinSeparator' },
    FloatTitle = { link = 'Title' },
    FloatFooter = { link = 'FloatTitle' },
    NormalNC = { link = 'Normal' },
    Pmenu = { fg = p.fg, bg = p.menu },
    PmenuSel = { fg = p.fg, bg = p.selection_bg },
    PmenuKind = { link = 'Pmenu' },
    PmenuKindSel = { link = 'PmenuSel' },
    PmenuExtra = { link = 'Pmenu' },
    PmenuExtraSel = { link = 'PmenuSel' },
    PmenuSbar = { bg = p.menu_alt },
    PmenuThumb = { bg = p.selection_bg },
    PmenuMatch = { bold = true },
    PmenuMatchSel = { bold = true },
    ComplMatchIns = {},
    Question = { link = 'Normal' },
    QuickFixLine = { fg = p.fg, bg = p.selection_bg },
    Search = { fg = p.black, bg = p.search_bg },
    SnippetTabstop = { bg = p.selection_bg },
    SpecialKey = { link = 'NonText' },
    SpellBad = { fg = p.red, underline = true },
    SpellCap = { fg = p.yellow },
    SpellLocal = { fg = p.yellow },
    SpellRare = { fg = p.yellow },
    StatusLine = { fg = p.gray, bold = true },
    StatusLineNC = { fg = p.gray },
    StatusLineTerm = { link = 'StatusLine' },
    StatusLineTermNC = { link = 'StatusLineNC' },
    TabLine = { fg = p.gray, bg = p.menu_alt },
    TabLineFill = { link = 'TabLine' },
    TabLineSel = { fg = p.gray, bold = true },
    Title = { bold = true },
    Visual = { bg = p.selection_bg },
    VisualNOS = { link = 'Visual' },
    WarningMsg = { fg = p.yellow },
    Whitespace = { link = 'NonText' },
    WildMenu = { link = 'PmenuSel' },
    WinBar = { link = 'StatusLine' },
    WinBarNC = { link = 'StatusLineNC' },
    Comment = { fg = p.gray },
    Constant = { fg = p.cyan },
    String = { fg = p.magenta },
    Character = { link = 'Constant' },
    Number = { link = 'Constant' },
    Boolean = { link = 'Constant' },
    Float = { link = 'Constant' },
    Identifier = { link = 'Normal' },
    Function = { link = 'Normal' },
    Statement = { fg = p.yellow },
    Conditional = { link = 'Statement' },
    Repeat = { link = 'Statement' },
    Label = { link = 'Statement' },
    Operator = { link = 'Normal' },
    Keyword = { link = 'Statement' },
    Exception = { link = 'Statement' },
    PreProc = { fg = p.blue },
    Include = { link = 'PreProc' },
    Define = { link = 'PreProc' },
    Macro = { link = 'PreProc' },
    PreCondit = { link = 'PreProc' },
    Type = { fg = p.green },
    StorageClass = { link = 'Type' },
    Structure = { link = 'Type' },
    Typedef = { link = 'Type' },
    Special = { link = 'Normal' },
    SpecialChar = { link = 'Special' },
    Tag = { link = 'Statement' },
    Delimiter = { link = 'Normal' },
    SpecialComment = { fg = p.gray, italic = true },
    Debug = { link = 'Special' },
    Underlined = { fg = p.fg, underline = true },
    Ignore = { link = 'Normal' },
    Error = { fg = p.red },
    Todo = { fg = p.cyan, bold = true, italic = true },
    Added = { fg = p.green },
    Changed = { fg = p.blue },
    Removed = { fg = p.red },
    DiagnosticError = { fg = p.red },
    DiagnosticWarn = { fg = p.yellow },
    DiagnosticInfo = { fg = p.cyan },
    DiagnosticHint = { fg = p.cyan },
    DiagnosticOk = { fg = p.green },
    DiagnosticVirtualTextError = { link = 'DiagnosticError' },
    DiagnosticVirtualTextWarn = { link = 'DiagnosticWarn' },
    DiagnosticVirtualTextInfo = { link = 'DiagnosticInfo' },
    DiagnosticVirtualTextHint = { link = 'DiagnosticHint' },
    DiagnosticVirtualTextOk = { link = 'DiagnosticOk' },
    DiagnosticUnderlineError = { underline = true, sp = p.red },
    DiagnosticUnderlineWarn = { underline = true, sp = p.yellow },
    DiagnosticUnderlineInfo = { underline = true, sp = p.cyan },
    DiagnosticUnderlineHint = { underline = true, sp = p.cyan },
    DiagnosticUnderlineOk = { underline = true, sp = p.green },
    DiagnosticFloatingError = { link = 'DiagnosticError' },
    DiagnosticFloatingWarn = { link = 'DiagnosticWarn' },
    DiagnosticFloatingInfo = { link = 'DiagnosticInfo' },
    DiagnosticFloatingHint = { link = 'DiagnosticHint' },
    DiagnosticFloatingOk = { link = 'DiagnosticOk' },
    DiagnosticSignError = { link = 'DiagnosticError' },
    DiagnosticSignWarn = { link = 'DiagnosticWarn' },
    DiagnosticSignInfo = { link = 'DiagnosticInfo' },
    DiagnosticSignHint = { link = 'DiagnosticHint' },
    DiagnosticSignOk = { link = 'DiagnosticOk' },
    DiagnosticDeprecated = { strikethrough = true },
    DiagnosticUnnecessary = { link = 'Comment' },
    ['@variable'] = { link = 'Identifier' },
    ['@variable.builtin'] = { link = 'Special' },
    ['@variable.parameter'] = { link = 'Special' },
    ['@variable.parameter.builtin'] = { link = 'Special' },
    ['@variable.member'] = { link = 'Identifier' },
    ['@constant'] = { link = 'Constant' },
    ['@constant.builtin'] = { link = 'Constant' },
    ['@constant.macro'] = { link = 'Constant' },
    ['@module'] = { link = 'Structure' },
    ['@module.builtin'] = { link = 'Special' },
    ['@label'] = { link = 'Label' },
    ['@string'] = { link = 'String' },
    ['@string.documentation'] = { link = 'String' },
    ['@string.regexp'] = { link = '@string.special' },
    ['@string.escape'] = { link = '@string.special' },
    ['@string.special'] = { link = 'SpecialChar' },
    ['@string.special.symbol'] = { link = 'Special' },
    ['@string.special.path'] = { link = 'Special' },
    ['@string.special.url'] = { link = 'Underlined' },
    ['@character'] = { link = 'Character' },
    ['@character.special'] = { link = 'SpecialChar' },
    ['@boolean'] = { link = 'Boolean' },
    ['@number'] = { link = 'Number' },
    ['@number.float'] = { link = 'Float' },
    ['@type'] = { link = 'Type' },
    ['@type.builtin'] = { link = 'Type' },
    ['@type.definition'] = { link = 'Typedef' },
    ['@type.qualifier'] = { link = 'Type' },
    ['@attribute'] = { link = 'Macro' },
    ['@attribute.builtin'] = { link = 'Macro' },
    ['@property'] = { link = '@variable.member' },
    ['@function'] = { link = 'Function' },
    ['@function.builtin'] = { link = 'Function' },
    ['@function.call'] = { link = 'Function' },
    ['@function.macro'] = { link = 'PreProc' },
    ['@function.method'] = { link = 'Function' },
    ['@function.method.call'] = { link = 'Function' },
    ['@constructor'] = { link = 'Special' },
    ['@operator'] = { link = 'Operator' },
    ['@keyword'] = { link = 'Keyword' },
    ['@keyword.coroutine'] = { link = 'Keyword' },
    ['@keyword.function'] = { link = 'Keyword' },
    ['@keyword.operator'] = { link = 'Operator' },
    ['@keyword.import'] = { link = 'Include' },
    ['@keyword.type'] = { link = 'Keyword' },
    ['@keyword.modifier'] = { link = 'Keyword' },
    ['@keyword.repeat'] = { link = 'Repeat' },
    ['@keyword.return'] = { link = 'Keyword' },
    ['@keyword.debug'] = { link = 'Keyword' },
    ['@keyword.exception'] = { link = 'Keyword' },
    ['@keyword.conditional'] = { link = 'Conditional' },
    ['@keyword.conditional.ternary'] = { link = 'Operator' },
    ['@keyword.directive'] = { link = 'PreProc' },
    ['@keyword.directive.define'] = { link = 'Define' },
    ['@punctuation.delimiter'] = { link = 'Delimiter' },
    ['@punctuation.bracket'] = { link = 'Normal' },
    ['@punctuation.special'] = { link = 'Special' },
    ['@comment'] = { link = 'Comment' },
    ['@comment.documentation'] = { link = 'Comment' },
    ['@comment.error'] = { link = 'DiagnosticError' },
    ['@comment.warning'] = { link = 'DiagnosticWarn' },
    ['@comment.todo'] = { link = 'Todo' },
    ['@comment.note'] = { link = 'DiagnosticInfo' },
    ['@markup.strong'] = { fg = p.yellow, bold = true },
    ['@markup.italic'] = { italic = true },
    ['@markup.strikethrough'] = { strikethrough = true },
    ['@markup.underline'] = { underline = true },
    ['@markup.heading'] = { fg = p.blue, bold = true },
    ['@markup.quote'] = { fg = p.cyan },
    ['@markup.math'] = { fg = p.cyan },
    ['@markup.link'] = { fg = p.cyan },
    ['@markup.link.label'] = { fg = p.cyan },
    ['@markup.link.url'] = { fg = p.cyan, underline = true, italic = true },
    ['@markup.raw'] = { link = 'Normal' },
    ['@markup.raw.block'] = { link = '@markup.raw' },
    ['@markup.list'] = { fg = p.blue },
    ['@markup.list.checked'] = { fg = p.green },
    ['@markup.list.unchecked'] = { fg = p.gray },
    ['@diff.plus'] = { link = 'Added' },
    ['@diff.minus'] = { link = 'Removed' },
    ['@diff.delta'] = { link = 'Changed' },
    ['@tag'] = { link = 'Tag' },
    ['@tag.builtin'] = { link = 'Tag' },
    ['@tag.attribute'] = { link = 'Type' },
    ['@tag.delimiter'] = { link = 'Normal' },
  }

  for group, parameters in pairs(groups) do
    vim.api.nvim_set_hl(0, group, parameters)
  end
end

vim.o.termguicolors = true
if vim.g.colors_name then
  vim.cmd.highlight('clear')
  vim.cmd.syntax('reset')
end
vim.g.colors_name = 'rycolor'

set_groups(palette)

vim.api.nvim_create_autocmd('BufEnter', {
  callback = function()
    if vim.bo.buftype ~= '' then
      return
    end
    vim.cmd.match('ColorColumn /\\%>79v.*\\%<81v/')
  end,
})
